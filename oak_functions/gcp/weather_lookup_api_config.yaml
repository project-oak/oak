type: google.api.Service
config_version: 3

#
# Name of the service configuration.
#
name: '*.apigateway.endpoints.oak-ci.cloud.goog'

#
# API title to appear in the user interface (Google Cloud Console).
#
title: Oak Functions gRPC API Gateway
apis:
  - name: oak.functions.server.GrpcHandler

#
# API usage restrictions.
#
usage:
  rules:
    # Invoke method can be called without an API Key for now.
    - selector: oak.functions.server.GrpcHandler.Invoke
      allow_unregistered_calls: true

backend:
  rules:
    - selector: '*'
      # Host name can be found on
      # https://pantheon.corp.google.com/run/detail/europe-west2/oak-functions-weather-lookup/general?project=oak-ci
      address: grpcs://oak-functions-weather-lookup-62sa4xcfia-nw.a.run.app
