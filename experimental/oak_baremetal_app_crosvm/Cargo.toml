[package]
name = "oak_baremetal_app_crosvm"
version = "0.1.0"
authors = ["Andri Saar <andrisaar@google.com>"]
edition = "2021"
license = "Apache-2.0"

[workspace]
resolver = "2"
members = ["."]

[features]
default = ["vsock_channel"]
vsock_channel = ["oak_baremetal_kernel/vsock_channel"]
simple_io_channel = ["oak_baremetal_kernel/simple_io_channel"]

[dependencies]
log = "*"
oak_baremetal_communication_channel = { path = "../oak_baremetal_channel" }
oak_baremetal_kernel = { path = "../../experimental/oak_baremetal_kernel", default-features = false }
oak_baremetal_runtime = { path = "../oak_baremetal_runtime", default-features = false, features = [
  "rust-crypto"
] }
oak_remote_attestation = { path = "../../remote_attestation/rust", default-features = false, features = [
  "rust-crypto"
] }
oak_remote_attestation_amd = { path = "../../oak_remote_attestation_amd", default-features = false, features = [
  "rust-crypto"
] }
oak_idl = { path = "../../oak_idl" }
static_assertions = "*"

[[bin]]
name = "oak_baremetal_app_crosvm"
test = false
bench = false

[patch.crates-io]
# Ensure no_std compatibility. TODO(#2920): remove once https://github.com/google/flatbuffers/pull/7338 is merged.
flatbuffers = { git = "https://github.com/jul-sh/flatbuffers.git", rev = "a07ddee936737da89aeb5a496f9742a805537188" }
