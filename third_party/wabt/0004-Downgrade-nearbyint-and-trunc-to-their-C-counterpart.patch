From 53fdf1f9a36cedc823493ada7feee5bbef71d8ad Mon Sep 17 00:00:00 2001
From: Tiziano Santoro <tiziano88@gmail.com>
Date: Wed, 31 Oct 2018 12:11:29 +0000
Subject: [PATCH 04/10] Downgrade nearbyint and trunc to their C counterparts

They are not supported in Asylo yet
---
 src/interp/interp.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git src/interp/interp.cc src/interp/interp.cc
index afdc23ee..5850c8b0 100644
--- src/interp/interp.cc
+++ src/interp/interp.cc
@@ -1236,7 +1236,7 @@ ValueTypeRep<T> FloatFloor(ValueTypeRep<T> v_rep) {
 // f{32,64}.trunc
 template <typename T>
 ValueTypeRep<T> FloatTrunc(ValueTypeRep<T> v_rep) {
-  auto result = ToRep(std::trunc(FromRep<T>(v_rep)));
+  auto result = ToRep(trunc(FromRep<T>(v_rep)));
   if (WABT_UNLIKELY(FloatTraits<T>::IsNan(result))) {
     result |= FloatTraits<T>::kQuietNanBit;
   }
@@ -1246,7 +1246,7 @@ ValueTypeRep<T> FloatTrunc(ValueTypeRep<T> v_rep) {
 // f{32,64}.nearest
 template <typename T>
 ValueTypeRep<T> FloatNearest(ValueTypeRep<T> v_rep) {
-  auto result = ToRep(std::nearbyint(FromRep<T>(v_rep)));
+  auto result = ToRep(nearbyint(FromRep<T>(v_rep)));
   if (WABT_UNLIKELY(FloatTraits<T>::IsNan(result))) {
     result |= FloatTraits<T>::kQuietNanBit;
   }
-- 
2.19.0.605.g01d371f741-goog

